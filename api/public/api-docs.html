<!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
            <title>API Documentation</title>
            <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only],
.vscode-high-contrast:not(.vscode-high-contrast-light) img[src$=\#gh-light-mode-only],
.vscode-high-contrast-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

</style>
            
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
<style>
:root {
  --color-note: #0969da;
  --color-tip: #1a7f37;
  --color-warning: #9a6700;
  --color-severe: #bc4c00;
  --color-caution: #d1242f;
  --color-important: #8250df;
}

</style>
<style>
@media (prefers-color-scheme: dark) {
  :root {
    --color-note: #2f81f7;
    --color-tip: #3fb950;
    --color-warning: #d29922;
    --color-severe: #db6d28;
    --color-caution: #f85149;
    --color-important: #a371f7;
  }
}

</style>
<style>
.markdown-alert {
  padding: 0.5rem 1rem;
  margin-bottom: 16px;
  color: inherit;
  border-left: .25em solid #888;
}

.markdown-alert>:first-child {
  margin-top: 0
}

.markdown-alert>:last-child {
  margin-bottom: 0
}

.markdown-alert .markdown-alert-title {
  display: flex;
  font-weight: 500;
  align-items: center;
  line-height: 1
}

.markdown-alert .markdown-alert-title .octicon {
  margin-right: 0.5rem;
  display: inline-block;
  overflow: visible !important;
  vertical-align: text-bottom;
  fill: currentColor;
}

.markdown-alert.markdown-alert-note {
  border-left-color: var(--color-note);
}

.markdown-alert.markdown-alert-note .markdown-alert-title {
  color: var(--color-note);
}

.markdown-alert.markdown-alert-important {
  border-left-color: var(--color-important);
}

.markdown-alert.markdown-alert-important .markdown-alert-title {
  color: var(--color-important);
}

.markdown-alert.markdown-alert-warning {
  border-left-color: var(--color-warning);
}

.markdown-alert.markdown-alert-warning .markdown-alert-title {
  color: var(--color-warning);
}

.markdown-alert.markdown-alert-tip {
  border-left-color: var(--color-tip);
}

.markdown-alert.markdown-alert-tip .markdown-alert-title {
  color: var(--color-tip);
}

.markdown-alert.markdown-alert-caution {
  border-left-color: var(--color-caution);
}

.markdown-alert.markdown-alert-caution .markdown-alert-title {
  color: var(--color-caution);
}

</style>
        
        </head>
        <body class="vscode-body vscode-light">
            <h1 id="api-documentation">API Documentation</h1>
<p>This guide describes the publicly available REST endpoints exposed by the API, the expected request payloads, and the standard response contract. All examples assume JSON request and response bodies.</p>
<ul>
<li><a href="#api-documentation">API Documentation</a>
<ul>
<li><a href="#logging">Logging</a></li>
<li><a href="#standard-response-envelope">Standard Response Envelope</a>
<ul>
<li><a href="#success-response">Success Response</a></li>
<li><a href="#error-response">Error Response</a></li>
<li><a href="#envelope-fields">Envelope Fields</a></li>
</ul>
</li>
<li><a href="#rate-limiting">Rate Limiting</a></li>
<li><a href="#shared-behaviours">Shared Behaviours</a></li>
<li><a href="#endpoints">Endpoints</a>
<ul>
<li><a href="#get-">GET /</a></li>
</ul>
</li>
<li><a href="#authentication">Authentication</a>
<ul>
<li><a href="#post-authregister">POST /auth/register</a></li>
<li><a href="#post-authresend-verification">POST /auth/resend-verification</a></li>
<li><a href="#post-authverify-email">POST /auth/verify-email</a></li>
<li><a href="#post-authlogin">POST /auth/login</a></li>
<li><a href="#post-authrefresh-token">POST /auth/refresh-token</a></li>
<li><a href="#post-authlogout">POST /auth/logout</a></li>
<li><a href="#post-authrequest-password-reset">POST /auth/request-password-reset</a></li>
<li><a href="#post-authreset-password">POST /auth/reset-password</a></li>
<li><a href="#post-authgoogle">POST /auth/google</a></li>
</ul>
</li>
<li><a href="#user-management">User Management</a>
<ul>
<li><a href="#get-usersme">GET /users/me</a></li>
<li><a href="#put-usersme">PUT /users/me</a></li>
<li><a href="#delete-usersme">DELETE /users/me</a></li>
<li><a href="#post-usersmeverify-delete">POST /users/me/verify-delete</a></li>
<li><a href="#post-usersmerequest-email-change">POST /users/me/request-email-change</a></li>
<li><a href="#post-usersmeverify-email-change">POST /users/me/verify-email-change</a></li>
<li><a href="#delete-usersmerequest-account-deletion-also-available-as-post">DELETE /users/me/request-account-deletion (also available as POST)</a></li>
<li><a href="#post-usersmeverify-account-deletion">POST /users/me/verify-account-deletion</a></li>
<li><a href="#get-usersmesessions">GET /users/me/sessions</a></li>
<li><a href="#delete-usersmesessionsfingerprint">DELETE /users/me/sessions/:fingerprint</a></li>
<li><a href="#post-usersmechange-password">POST /users/me/change-password</a></li>
</ul>
</li>
<li><a href="#admin">Admin</a></li>
</ul>
</li>
</ul>
<p><strong>Base URL:</strong> <code>https://api.fjnel.co.za</code></p>
<h2 id="logging">Logging</h2>
<p>The API writes structured JSON logs to rotating files. Every HTTP request is captured with an <code>event</code> of <code>HTTP_REQUEST</code>, together with the method, path, status code, latency, originating IP, user agent, and a sanitised copy of the request body. Significant actions (registration, login, logout, verification, password reset, profile changes) log an action-specific <code>event</code> such as <code>USER_REGISTERED</code> or <code>LOGIN_ATTEMPT</code>. Each log entry records a <code>status</code> (<code>SUCCESS</code>, <code>FAILURE</code>, or <code>INFO</code>) and a normalised <code>error_message</code> where applicable.</p>
<h2 id="standard-response-envelope">Standard Response Envelope</h2>
<p>All API responses (success or error) adhere to the same JSON envelope. Response times are reported in milliseconds as strings for readability.</p>
<h3 id="success-response">Success Response</h3>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;14.62&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Description of the outcome&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;example&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Payload varies per endpoint&quot;</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="error-response">Error Response</h3>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;9.81&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;High level error description&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Specific error detail 1.&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">&quot;Specific error detail 2.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="envelope-fields">Envelope Fields</h3>
<ul>
<li><code>status</code>: <code>&quot;success&quot;</code> or <code>&quot;error&quot;</code>.</li>
<li><code>httpCode</code>: Mirrors the HTTP status code returned by Express.</li>
<li><code>responseTime</code>: Milliseconds elapsed, formatted as a string with two decimals.</li>
<li><code>message</code>: High-level summary of the outcome.</li>
<li><code>data</code>: Object containing endpoint-specific payload (empty object on errors).</li>
<li><code>errors</code>: Array of human-readable error messages (empty on success).</li>
</ul>
<h2 id="rate-limiting">Rate Limiting</h2>
<p>When a limit is exceeded the API returns HTTP <code>429</code> using the standard error envelope with <code>message</code> <code>&quot;Too many requests&quot;</code>.</p>
<table>
<thead>
<tr>
<th>Endpoint</th>
<th>Limit</th>
<th>Window</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>POST /auth/register</code></td>
<td>5 requests</td>
<td>10 minutes</td>
<td>CAPTCHA required (<code>captchaToken</code>, action <code>register</code>).</td>
</tr>
<tr>
<td><code>POST /auth/resend-verification</code></td>
<td>1 request</td>
<td>5 minutes</td>
<td>CAPTCHA required (<code>captchaToken</code>, action <code>resend_verification</code>).</td>
</tr>
<tr>
<td><code>POST /auth/login</code></td>
<td>10 requests</td>
<td>10 minutes</td>
<td>CAPTCHA required (<code>captchaToken</code>, action <code>login</code>).</td>
</tr>
<tr>
<td><code>POST /auth/request-password-reset</code></td>
<td>1 request</td>
<td>5 minutes</td>
<td>CAPTCHA required (<code>captchaToken</code>, action <code>request_password_reset</code>).</td>
</tr>
<tr>
<td><code>POST /auth/reset-password</code></td>
<td>1 request</td>
<td>5 minutes</td>
<td>CAPTCHA required (<code>captchaToken</code>, action <code>reset_password</code>).</td>
</tr>
<tr>
<td>Sensitive user actions (<code>POST /users/me/verify-delete</code>, <code>/users/me/verify-account-deletion</code>, <code>/users/me/verify-email-change</code>, <code>/users/me/change-password</code>)</td>
<td>3 requests</td>
<td>5 minutes per IP</td>
<td>Protected by <code>sensitiveActionLimiter</code> + CAPTCHA.</td>
</tr>
<tr>
<td>Email-sending user actions (<code>DELETE /users/me</code>, <code>/users/me/request-email-change</code>, <code>/users/me/request-account-deletion</code> via <code>POST</code> or <code>DELETE</code>, <code>/users/me/change-password</code>, <code>/users/me/verify-*</code>)</td>
<td>1 request</td>
<td>5 minutes per IP</td>
<td>Additional <code>emailCostLimiter</code> applied to limit outbound email costs.</td>
</tr>
<tr>
<td>Authenticated endpoints (<code>/auth/logout</code>, <code>/users/*</code>, <code>/admin/*</code>)</td>
<td>60 requests</td>
<td>1 minute per authenticated user</td>
<td>Enforced by <code>authenticatedLimiter</code>; keyed by <code>user.id</code>.</td>
</tr>
</tbody>
</table>
<p>All other endpoints currently have no dedicated custom limit.</p>
<h2 id="shared-behaviours">Shared Behaviours</h2>
<ul>
<li><strong>Authentication:</strong> Routes guarded by <code>requiresAuth</code> return HTTP <code>401</code> with <code>message</code> <code>&quot;Authentication required for this action.&quot;</code> when the Authorization header is missing or invalid. Disabled accounts receive HTTP <code>403</code> with <code>message</code> <code>&quot;Your account has been disabled.&quot;</code>.</li>
<li><strong>Role Checks:</strong> Admin-only routes use <code>requireRole</code>. Non-admin users receive HTTP <code>403</code> with <code>message</code> <code>&quot;Forbidden: Insufficient permissions.&quot;</code>.</li>
<li><strong>Validation:</strong> Validation failures respond with HTTP <code>400</code>, <code>message</code> <code>&quot;Validation Error&quot;</code>, and each issue listed in <code>errors</code>.</li>
<li><strong>Global 404:</strong> Unmatched routes return HTTP <code>404</code> with <code>message</code> <code>&quot;Endpoint Not Found&quot;</code> and guidance in <code>errors</code>.</li>
<li><strong>Unhandled Errors:</strong> Unexpected exceptions return HTTP <code>500</code>, <code>message</code> <code>&quot;Internal Server Error&quot;</code>, and a generic error list.</li>
<li><strong>Account action quotas:</strong> Authenticated flows that trigger emails also enforce daily per-account quotas: up to 2 password changes per day, 1 email change request per day, and 2 account disable or deletion requests per day (regardless of HTTP verb).</li>
<li><strong>Password metadata:</strong> Whenever the API returns a user profile (login, <code>/users/me</code>, profile updates), the payload includes <code>passwordUpdated</code>—an ISO timestamp describing the last password change, or <code>null</code> for OAuth-only accounts.</li>
</ul>
<h2 id="endpoints">Endpoints</h2>
<p>Sample identifiers, tokens, timestamps, and IDs shown below are illustrative.</p>
<h3 id="get-">GET /</h3>
<ul>
<li><strong>Description:</strong> Health check that confirms the API is reachable and returns the documentation link.</li>
<li><strong>Authentication:</strong> Not required.</li>
</ul>
<h4 id="request-overview">Request Overview</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td><code>GET</code></td>
</tr>
<tr>
<td>Path</td>
<td><code>/</code></td>
</tr>
<tr>
<td>Authentication</td>
<td>None</td>
</tr>
<tr>
<td>Content-Type</td>
<td>N/A (no body)</td>
</tr>
</tbody>
</table>
<h4 id="required-headers">Required Headers</h4>
<table>
<thead>
<tr>
<th>Header</th>
<th>Required</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Accept</code></td>
<td>No</td>
<td><code>application/json</code></td>
<td>Responses are JSON by default.</td>
</tr>
<tr>
<td><code>Authorization</code></td>
<td>No</td>
<td>—</td>
<td>Not used.</td>
</tr>
</tbody>
</table>
<h4 id="body-parameters">Body Parameters</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>(none)</em></td>
<td>—</td>
<td>—</td>
<td>This endpoint does not accept a request body.</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Successful Response (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.08&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;The API is working!&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;14/01/2025, 17:23:51&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;api_documentation_url&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://api.fjnel.co.za/api-docs.html&quot;</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr>
<h2 id="authentication">Authentication</h2>
<p>Authentication flows combine email/password, Google OAuth, email verification, and password reset flows. Unless stated otherwise, authentication endpoints do not require an access token but do require the relevant CAPTCHA token.</p>
<h3 id="post-authregister">POST /auth/register</h3>
<ul>
<li><strong>Purpose:</strong> Create a new user account.</li>
<li><strong>Authentication:</strong> Not required.</li>
<li><strong>Rate Limit:</strong> 5 requests per 10 minutes per IP.</li>
<li><strong>CAPTCHA:</strong> Provide <code>captchaToken</code> validated against the <code>register</code> action.</li>
</ul>
<h4 id="request-overview-1">Request Overview</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td><code>POST</code></td>
</tr>
<tr>
<td>Path</td>
<td><code>/auth/register</code></td>
</tr>
<tr>
<td>Authentication</td>
<td>None</td>
</tr>
<tr>
<td>Rate Limit</td>
<td>5 requests / 10 minutes / IP</td>
</tr>
<tr>
<td>CAPTCHA Action</td>
<td><code>register</code> (reCAPTCHA v3)</td>
</tr>
<tr>
<td>Content-Type</td>
<td><code>application/json</code></td>
</tr>
</tbody>
</table>
<h4 id="required-headers-1">Required Headers</h4>
<table>
<thead>
<tr>
<th>Header</th>
<th>Required</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Content-Type</code></td>
<td>Yes</td>
<td><code>application/json</code></td>
<td>Body must be JSON encoded.</td>
</tr>
<tr>
<td><code>Accept</code></td>
<td>No</td>
<td><code>application/json</code></td>
<td>Responses are JSON.</td>
</tr>
<tr>
<td><code>Authorization</code></td>
<td>No</td>
<td>—</td>
<td>Not used.</td>
</tr>
</tbody>
</table>
<h4 id="body-parameters-1">Body Parameters</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>captchaToken</code></td>
<td>string</td>
<td>Yes</td>
<td>reCAPTCHA v3 token for the <code>register</code> action.</td>
</tr>
<tr>
<td><code>fullName</code></td>
<td>string</td>
<td>Yes</td>
<td>2–255 characters; letters plus spaces, hyphens, periods, apostrophes.</td>
</tr>
<tr>
<td><code>preferredName</code></td>
<td>string</td>
<td>No</td>
<td>2–100 alphabetic characters; optional friendly name.</td>
</tr>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>Yes</td>
<td>5–255 characters; must be unique and in valid email format.</td>
</tr>
<tr>
<td><code>password</code></td>
<td>string</td>
<td>Yes</td>
<td>10–100 characters; must include upper, lower, digit, and special character.</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Request Body:</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;captchaToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;fullName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Jane Doe&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;preferredName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Jane&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jane@example.com&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;password&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;P@ssw0rd123!&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Generic Success (200):</strong> Returned both for new registrations and when an existing account needs verification so that email enumeration is prevented.</li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;11.02&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;If this email can be registered, you will receive an email with the next steps shortly.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;disclaimer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;If you do not see an email within a few minutes, please check your spam folder or try again later.&quot;</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Validation Error (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;7.41&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Validation Error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Full Name must be between 2 and 255 characters.&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">&quot;Password must include at least one special character.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>CAPTCHA Failure (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5.44&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CAPTCHA verification failed&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Please refresh the page and try again.&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">&quot;Make sure that you provided a captchaToken in your request.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Token Issuance Failure (500):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">500</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;8.39&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Failed to issue verification token&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Database connection lost&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Database Error (500):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">500</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;7.81&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Database Error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;An error occurred while creating the user&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">&quot;duplicate key value violates unique constraint \&quot;users_email_key\&quot;&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="post-authresend-verification">POST /auth/resend-verification</h3>
<ul>
<li><strong>Purpose:</strong> Re-send the verification email for an unverified account.</li>
<li><strong>Authentication:</strong> Not required.</li>
<li><strong>Rate Limit:</strong> 1 request per 5 minutes per IP.</li>
<li><strong>CAPTCHA:</strong> Provide <code>captchaToken</code> validated against the <code>resend_verification</code> action.</li>
</ul>
<h4 id="request-overview-2">Request Overview</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td><code>POST</code></td>
</tr>
<tr>
<td>Path</td>
<td><code>/auth/resend-verification</code></td>
</tr>
<tr>
<td>Authentication</td>
<td>None</td>
</tr>
<tr>
<td>Rate Limit</td>
<td>1 request / 5 minutes / IP</td>
</tr>
<tr>
<td>CAPTCHA Action</td>
<td><code>resend_verification</code></td>
</tr>
<tr>
<td>Content-Type</td>
<td><code>application/json</code></td>
</tr>
</tbody>
</table>
<h4 id="required-headers-2">Required Headers</h4>
<table>
<thead>
<tr>
<th>Header</th>
<th>Required</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Content-Type</code></td>
<td>Yes</td>
<td><code>application/json</code></td>
<td>Body must be JSON encoded.</td>
</tr>
<tr>
<td><code>Accept</code></td>
<td>No</td>
<td><code>application/json</code></td>
<td>Responses are JSON.</td>
</tr>
<tr>
<td><code>Authorization</code></td>
<td>No</td>
<td>—</td>
<td>Not used.</td>
</tr>
</tbody>
</table>
<h4 id="body-parameters-2">Body Parameters</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>captchaToken</code></td>
<td>string</td>
<td>Yes</td>
<td>reCAPTCHA v3 token for the <code>resend_verification</code> action.</td>
</tr>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>Yes</td>
<td>Email address to resend verification for; must be 5–255 chars and valid format.</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Request Body:</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;captchaToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jane@example.com&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Generic Success (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;3.12&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;If you have registered an account with this email address and it is unverified, you will receive a verification email.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;disclaimer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;If you did not receive an email when you should have, please check your spam folder or try again later.&quot;</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>CAPTCHA Failure (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5.27&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CAPTCHA verification failed&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Please refresh the page and try again.&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">&quot;Make sure that you provided a captchaToken in your request.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Validation Error (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.98&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Validation Error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Email must be provided.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="post-authverify-email">POST /auth/verify-email</h3>
<ul>
<li><strong>Purpose:</strong> Mark a user as verified using the token emailed during registration.</li>
<li><strong>Authentication:</strong> Not required.</li>
<li><strong>Rate Limit:</strong> Not currently rate limited beyond CAPTCHA.</li>
<li><strong>CAPTCHA:</strong> Provide <code>captchaToken</code> validated against the <code>verify_email</code> action.</li>
</ul>
<h4 id="request-overview-3">Request Overview</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td><code>POST</code></td>
</tr>
<tr>
<td>Path</td>
<td><code>/auth/verify-email</code></td>
</tr>
<tr>
<td>Authentication</td>
<td>None</td>
</tr>
<tr>
<td>Rate Limit</td>
<td>Not currently rate limited</td>
</tr>
<tr>
<td>CAPTCHA Action</td>
<td><code>verify_email</code></td>
</tr>
<tr>
<td>Content-Type</td>
<td><code>application/json</code></td>
</tr>
</tbody>
</table>
<h4 id="required-headers-3">Required Headers</h4>
<table>
<thead>
<tr>
<th>Header</th>
<th>Required</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Content-Type</code></td>
<td>Yes</td>
<td><code>application/json</code></td>
<td>Body must be JSON encoded.</td>
</tr>
<tr>
<td><code>Accept</code></td>
<td>No</td>
<td><code>application/json</code></td>
<td>Responses are JSON.</td>
</tr>
<tr>
<td><code>Authorization</code></td>
<td>No</td>
<td>—</td>
<td>Not used.</td>
</tr>
</tbody>
</table>
<h4 id="body-parameters-3">Body Parameters</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>captchaToken</code></td>
<td>string</td>
<td>Yes</td>
<td>reCAPTCHA v3 token for the <code>verify_email</code> action.</td>
</tr>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>Yes</td>
<td>Email address to verify (5–255 characters, valid format).</td>
</tr>
<tr>
<td><code>token</code></td>
<td>string</td>
<td>Yes</td>
<td>Email verification token (32-byte hex string).</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Request Body:</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;captchaToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jane@example.com&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;token&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;f1b8d0c7...&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Verified (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;6.84&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Email verified successfully. You can now log in.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;b6df9c94-91b3-4ea7-ac37-4f5b8d2c8d1e&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jane@example.com&quot;</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Already Verified (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.56&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Email already verified. You can log in.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;b6df9c94-91b3-4ea7-ac37-4f5b8d2c8d1e&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jane@example.com&quot;</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>CAPTCHA Failure (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5.73&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CAPTCHA verification failed&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Please refresh the page and try again.&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">&quot;Make sure that you provided a captchaToken in your request.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Invalid Token or Email (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;7.03&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Token expired or incorrect email address&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;The provided token is invalid, has expired, or the email address is incorrect.&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">&quot;Please request a new verification email.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Validation Error (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;6.22&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Token expired or incorrect email address&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Email must be provided.&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">&quot;A valid verification token must be provided.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Database Error (500):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">500</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;9.64&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Database Error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;An error occurred while verifying your email. Please try again.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Internal Error (500):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">500</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;8.77&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Internal Server Error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;An error occurred while verifying your email. Please try again.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="post-authlogin">POST /auth/login</h3>
<ul>
<li><strong>Purpose:</strong> Authenticate with email and password and issue access/refresh tokens.</li>
<li><strong>Authentication:</strong> Not required.</li>
<li><strong>Rate Limit:</strong> 10 requests per 10 minutes per IP.</li>
<li><strong>CAPTCHA:</strong> Provide <code>captchaToken</code> validated against the <code>login</code> action.</li>
</ul>
<h4 id="request-overview-4">Request Overview</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td><code>POST</code></td>
</tr>
<tr>
<td>Path</td>
<td><code>/auth/login</code></td>
</tr>
<tr>
<td>Authentication</td>
<td>None</td>
</tr>
<tr>
<td>Rate Limit</td>
<td>10 requests / 10 minutes / IP</td>
</tr>
<tr>
<td>CAPTCHA Action</td>
<td><code>login</code></td>
</tr>
<tr>
<td>Content-Type</td>
<td><code>application/json</code></td>
</tr>
</tbody>
</table>
<h4 id="required-headers-4">Required Headers</h4>
<table>
<thead>
<tr>
<th>Header</th>
<th>Required</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Content-Type</code></td>
<td>Yes</td>
<td><code>application/json</code></td>
<td>Body must be JSON encoded.</td>
</tr>
<tr>
<td><code>Accept</code></td>
<td>No</td>
<td><code>application/json</code></td>
<td>Responses are JSON.</td>
</tr>
<tr>
<td><code>Authorization</code></td>
<td>No</td>
<td>—</td>
<td>Not used.</td>
</tr>
</tbody>
</table>
<h4 id="body-parameters-4">Body Parameters</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>captchaToken</code></td>
<td>string</td>
<td>Yes</td>
<td>reCAPTCHA v3 token for the <code>login</code> action.</td>
</tr>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>Yes</td>
<td>Email address of the user (case-insensitive).</td>
</tr>
<tr>
<td><code>password</code></td>
<td>string</td>
<td>Yes</td>
<td>Plain-text password to verify; not stored.</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Request Body:</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;captchaToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jane@example.com&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;password&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;P@ssw0rd123!&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Authenticated (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;18.02&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Login successful.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;accessToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&lt;jwt&gt;&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;refreshToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&lt;jwt&gt;&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;user&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;b6df9c94-91b3-4ea7-ac37-4f5b8d2c8d1e&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jane@example.com&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;fullName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Jane Doe&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;preferredName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Jane&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;role&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;user&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;isVerified&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;passwordUpdated&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2024-07-11T10:22:33.000Z&quot;</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Invalid Credentials (401):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">401</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;6.51&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Invalid email or password.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;The provided email or password is incorrect&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>CAPTCHA Failure (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5.18&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CAPTCHA verification failed&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Please refresh the page and try again.&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">&quot;Make sure that you provided a captchaToken in your request.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Account Disabled (403):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">403</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.92&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Your account has been disabled.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Please contact the system administrator if you believe this is a mistake.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Server Error (500):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">500</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;10.44&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Internal Server Error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;An error occurred during login. Please try again.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="post-authrefresh-token">POST /auth/refresh-token</h3>
<ul>
<li><strong>Purpose:</strong> Exchange a valid refresh token for a new access token.</li>
<li><strong>Authentication:</strong> Not required (the refresh token provides trust).</li>
</ul>
<h4 id="request-overview-5">Request Overview</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td><code>POST</code></td>
</tr>
<tr>
<td>Path</td>
<td><code>/auth/refresh-token</code></td>
</tr>
<tr>
<td>Authentication</td>
<td>Not required</td>
</tr>
<tr>
<td>Content-Type</td>
<td><code>application/json</code></td>
</tr>
</tbody>
</table>
<h4 id="required-headers-5">Required Headers</h4>
<table>
<thead>
<tr>
<th>Header</th>
<th>Required</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Content-Type</code></td>
<td>Yes</td>
<td><code>application/json</code></td>
<td>Body must be JSON encoded.</td>
</tr>
<tr>
<td><code>Accept</code></td>
<td>No</td>
<td><code>application/json</code></td>
<td>Responses are JSON.</td>
</tr>
<tr>
<td><code>Authorization</code></td>
<td>No</td>
<td>—</td>
<td>Not used.</td>
</tr>
</tbody>
</table>
<h4 id="body-parameters-5">Body Parameters</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>refreshToken</code></td>
<td>string (JWT)</td>
<td>Yes</td>
<td>Refresh token previously issued by <code>/auth/login</code> or <code>/auth/google</code>.</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Request Body:</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;refreshToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&lt;jwt&gt;&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Refreshed (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;7.81&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Access token refreshed.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;accessToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&lt;jwt&gt;&quot;</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Missing Token (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.07&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Refresh token required&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Please provide a valid refresh token in the request body.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Invalid or Revoked Token (401):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">401</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;6.35&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Invalid refresh token&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;The provided refresh token is invalid or has expired.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Token User Missing (401):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">401</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;6.90&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Invalid refresh token&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;User associated with token not found.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Account Disabled (403):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">403</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;6.22&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Your account has been disabled.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Please contact the system administrator if you believe this is a mistake.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Server Error (500):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">500</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;8.58&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Internal Server Error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;An error occurred while refreshing the access token.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="post-authlogout">POST /auth/logout</h3>
<ul>
<li><strong>Purpose:</strong> Revoke one or all active refresh tokens for the authenticated user.</li>
<li><strong>Authentication:</strong> Access token required (<code>Authorization: Bearer &lt;accessToken&gt;</code>).</li>
<li><strong>Rate Limit:</strong> 60 requests per minute per authenticated user.</li>
</ul>
<h4 id="request-overview-6">Request Overview</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td><code>POST</code></td>
</tr>
<tr>
<td>Path</td>
<td><code>/auth/logout</code></td>
</tr>
<tr>
<td>Authentication</td>
<td><code>Authorization: Bearer &lt;accessToken&gt;</code></td>
</tr>
<tr>
<td>Rate Limit</td>
<td>60 requests / minute / user + 1 request / 5 minutes / IP (email cost) + 2 requests / day / account</td>
</tr>
<tr>
<td>Content-Type</td>
<td><code>application/json</code></td>
</tr>
</tbody>
</table>
<h4 id="required-headers-6">Required Headers</h4>
<table>
<thead>
<tr>
<th>Header</th>
<th>Required</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Authorization</code></td>
<td>Yes</td>
<td><code>Bearer &lt;accessToken&gt;</code></td>
<td>Access token generated by <code>/auth/login</code> or <code>/auth/google</code>.</td>
</tr>
<tr>
<td><code>Content-Type</code></td>
<td>Yes</td>
<td><code>application/json</code></td>
<td>Body must be JSON encoded.</td>
</tr>
<tr>
<td><code>Accept</code></td>
<td>No</td>
<td><code>application/json</code></td>
<td>Responses are JSON.</td>
</tr>
</tbody>
</table>
<h4 id="body-parameters-6">Body Parameters</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>refreshToken</code></td>
<td>string (JWT)</td>
<td>Conditionally</td>
<td>Required unless <code>allDevices</code> is provided; identifies the session to revoke.</td>
</tr>
<tr>
<td><code>allDevices</code></td>
<td>boolean | string</td>
<td>No</td>
<td>Set to <code>true</code>, <code>1</code>, <code>&quot;true&quot;</code>, <code>&quot;1&quot;</code>, or <code>&quot;all&quot;</code> to revoke every active session without supplying <code>refreshToken</code>.</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Request Body:</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;refreshToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&lt;jwt&gt;&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;allDevices&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>Set <code>allDevices</code> truthy (<code>true</code>, <code>&quot;true&quot;</code>, <code>1</code>, <code>&quot;1&quot;</code>, or <code>&quot;all&quot;</code>) to revoke every active session without supplying a refresh token.</p>
<ul>
<li><strong>Single Session Logout (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5.94&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Logged out successfully.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;scope&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;single&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;revokedSessions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>All Sessions Logout (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;6.12&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Logged out successfully.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;scope&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;all&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;revokedSessions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Missing Refresh Token (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.31&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Refresh token required&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Please provide a valid refresh token in the request body.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Invalid Refresh Token (401):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">401</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5.49&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Invalid refresh token&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;The provided refresh token is invalid or has expired.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Forbidden Session (403):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">403</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5.17&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Forbidden&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;You can only log out your own session.&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">&quot;The access token and refresh token do not belong to the same user.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Server Error (500):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">500</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;7.95&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Internal Server Error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;An error occurred while logging out. Please try again.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="post-authrequest-password-reset">POST /auth/request-password-reset</h3>
<ul>
<li><strong>Purpose:</strong> Send a password reset email if the account exists.</li>
<li><strong>Authentication:</strong> Not required.</li>
<li><strong>Rate Limit:</strong> 1 request per 5 minutes per IP.</li>
<li><strong>CAPTCHA:</strong> Provide <code>captchaToken</code> validated against the <code>request_password_reset</code> action.</li>
</ul>
<h4 id="request-overview-7">Request Overview</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td><code>POST</code></td>
</tr>
<tr>
<td>Path</td>
<td><code>/auth/request-password-reset</code></td>
</tr>
<tr>
<td>Authentication</td>
<td>None</td>
</tr>
<tr>
<td>Rate Limit</td>
<td>1 request / 5 minutes / IP</td>
</tr>
<tr>
<td>CAPTCHA Action</td>
<td><code>request_password_reset</code></td>
</tr>
<tr>
<td>Content-Type</td>
<td><code>application/json</code></td>
</tr>
</tbody>
</table>
<h4 id="required-headers-7">Required Headers</h4>
<table>
<thead>
<tr>
<th>Header</th>
<th>Required</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Content-Type</code></td>
<td>Yes</td>
<td><code>application/json</code></td>
<td>Body must be JSON encoded.</td>
</tr>
<tr>
<td><code>Accept</code></td>
<td>No</td>
<td><code>application/json</code></td>
<td>Responses are JSON.</td>
</tr>
<tr>
<td><code>Authorization</code></td>
<td>No</td>
<td>—</td>
<td>Not used.</td>
</tr>
</tbody>
</table>
<h4 id="body-parameters-7">Body Parameters</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>captchaToken</code></td>
<td>string</td>
<td>Yes</td>
<td>reCAPTCHA v3 token for the <code>request_password_reset</code> action.</td>
</tr>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>Yes</td>
<td>Email address to send the password reset link to.</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Request Body:</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;captchaToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jane@example.com&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Generic Success (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;3.84&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;If you have registered an account with this email address, you will receive a password reset email.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;disclaimer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;If you did not receive an email when you should have, please check your spam folder or try again later.&quot;</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>CAPTCHA Failure (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5.09&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CAPTCHA verification failed&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Please refresh the page and try again.&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">&quot;Make sure that you provided a captchaToken in your request.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Validation Error (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.88&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Validation Error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Email must be provided.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<blockquote>
<p><strong>Note:</strong> Unexpected errors still respond with the same generic <code>200</code> envelope to avoid leaking account existence.</p>
</blockquote>
<h3 id="post-authreset-password">POST /auth/reset-password</h3>
<ul>
<li><strong>Purpose:</strong> Reset the account password using the emailed token.</li>
<li><strong>Authentication:</strong> Not required.</li>
<li><strong>Rate Limit:</strong> 1 request per 5 minutes per IP.</li>
<li><strong>CAPTCHA:</strong> Provide <code>captchaToken</code> validated against the <code>reset_password</code> action.</li>
</ul>
<h4 id="request-overview-8">Request Overview</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td><code>POST</code></td>
</tr>
<tr>
<td>Path</td>
<td><code>/auth/reset-password</code></td>
</tr>
<tr>
<td>Authentication</td>
<td>None</td>
</tr>
<tr>
<td>Rate Limit</td>
<td>1 request / 5 minutes / IP</td>
</tr>
<tr>
<td>CAPTCHA Action</td>
<td><code>reset_password</code></td>
</tr>
<tr>
<td>Content-Type</td>
<td><code>application/json</code></td>
</tr>
</tbody>
</table>
<h4 id="required-headers-8">Required Headers</h4>
<table>
<thead>
<tr>
<th>Header</th>
<th>Required</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Content-Type</code></td>
<td>Yes</td>
<td><code>application/json</code></td>
<td>Body must be JSON encoded.</td>
</tr>
<tr>
<td><code>Accept</code></td>
<td>No</td>
<td><code>application/json</code></td>
<td>Responses are JSON.</td>
</tr>
<tr>
<td><code>Authorization</code></td>
<td>No</td>
<td>—</td>
<td>Not used.</td>
</tr>
</tbody>
</table>
<h4 id="body-parameters-8">Body Parameters</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>captchaToken</code></td>
<td>string</td>
<td>Yes</td>
<td>reCAPTCHA v3 token for the <code>reset_password</code> action.</td>
</tr>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>Yes</td>
<td>Email address associated with the password reset request.</td>
</tr>
<tr>
<td><code>token</code></td>
<td>string</td>
<td>Yes</td>
<td>Password-reset token sent via email (32-byte hex).</td>
</tr>
<tr>
<td><code>newPassword</code></td>
<td>string</td>
<td>Yes</td>
<td>10–100 characters, including upper, lower, digit, and special character.</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Request Body:</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;captchaToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jane@example.com&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;token&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;f1b8d0c7...&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;newPassword&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;N3wP@ssw0rd!!!&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Password Reset (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;9.42&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Password reset successfully. You can now log in.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;b6df9c94-91b3-4ea7-ac37-4f5b8d2c8d1e&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jane@example.com&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;passwordUpdated&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2025-01-17T09:02:44.000Z&quot;</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>CAPTCHA Failure (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5.26&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CAPTCHA verification failed&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Please refresh the page and try again.&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">&quot;Make sure that you provided a captchaToken in your request.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Validation Error (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;6.91&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Validation Error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;A valid password reset token must be provided.&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">&quot;Password must include at least one special character.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Invalid Token or Email (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;6.74&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Token expired or incorrect email address&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;The provided token is invalid, has expired, or the email address is incorrect.&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">&quot;Please request a new password reset email.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Database Error (500):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">500</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;8.54&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Database Error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;An error occurred while resetting your password. Please try again.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Server Error (500):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">500</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;8.97&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Internal Server Error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;An error occurred while resetting your password. Please try again.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="post-authgoogle">POST /auth/google</h3>
<ul>
<li><strong>Purpose:</strong> Sign up or sign in a user using a verified Google ID token.</li>
<li><strong>Authentication:</strong> Not required.</li>
<li><strong>Request Body:</strong></li>
</ul>
<h4 id="request-overview-9">Request Overview</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td><code>POST</code></td>
</tr>
<tr>
<td>Path</td>
<td><code>/auth/google</code></td>
</tr>
<tr>
<td>Authentication</td>
<td>None</td>
</tr>
<tr>
<td>Content-Type</td>
<td><code>application/json</code></td>
</tr>
</tbody>
</table>
<h4 id="required-headers-9">Required Headers</h4>
<table>
<thead>
<tr>
<th>Header</th>
<th>Required</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Content-Type</code></td>
<td>Yes</td>
<td><code>application/json</code></td>
<td>Body must be JSON encoded.</td>
</tr>
<tr>
<td><code>Accept</code></td>
<td>No</td>
<td><code>application/json</code></td>
<td>Responses are JSON.</td>
</tr>
<tr>
<td><code>Authorization</code></td>
<td>No</td>
<td>—</td>
<td>Not used.</td>
</tr>
</tbody>
</table>
<h4 id="body-parameters-9">Body Parameters</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>idToken</code></td>
<td>string</td>
<td>Yes</td>
<td>ID token returned by Google OAuth (must be for the configured client ID).</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Request Body:</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;idToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&lt;google-id-token&gt;&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Authenticated (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;19.77&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Login successful.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;accessToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&lt;jwt&gt;&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;refreshToken&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&lt;jwt&gt;&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;user&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;b6df9c94-91b3-4ea7-ac37-4f5b8d2c8d1e&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jane@example.com&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;fullName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Jane Doe&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;preferredName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Jane&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;role&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;user&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;isVerified&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;passwordUpdated&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">null</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>ID Token Missing (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.71&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ID token required&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Please provide a valid Google ID token in the request body.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Invalid ID Token (401):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">401</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;6.08&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Invalid ID token&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;The provided Google ID token is invalid.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Email Not Verified by Google (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5.33&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Email not verified by Google&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Your Google account email is not verified. Please verify your email with Google before signing in.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Missing Google User ID (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5.12&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Invalid Google profile: No user ID&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Could not retrieve valid user ID from Google profile.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Incomplete Google Profile (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5.76&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Incomplete Google profile&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Your Google profile is missing required information.&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">&quot;Please ensure your Google account has an email address and name associated with it.&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">&quot;Or, if you still have issues, please register/login manually.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Server Error (500):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">500</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;9.11&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Internal Server Error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;An error occurred during Google login. Please try again.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr>
<h2 id="user-management">User Management</h2>
<p>All user management endpoints require a valid access token (<code>Authorization: Bearer &lt;accessToken&gt;</code>) and are subject to the <code>authenticatedLimiter</code> (60 requests per minute per user).</p>
<h3 id="get-usersme">GET /users/me</h3>
<ul>
<li><strong>Purpose:</strong> Retrieve the authenticated user's profile and connected OAuth providers.</li>
</ul>
<h4 id="request-overview-10">Request Overview</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td><code>GET</code></td>
</tr>
<tr>
<td>Path</td>
<td><code>/users/me</code></td>
</tr>
<tr>
<td>Authentication</td>
<td><code>Authorization: Bearer &lt;accessToken&gt;</code></td>
</tr>
<tr>
<td>Rate Limit</td>
<td>60 requests / minute / user</td>
</tr>
<tr>
<td>Content-Type</td>
<td>N/A (no body)</td>
</tr>
</tbody>
</table>
<h4 id="required-headers-10">Required Headers</h4>
<table>
<thead>
<tr>
<th>Header</th>
<th>Required</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Authorization</code></td>
<td>Yes</td>
<td><code>Bearer &lt;accessToken&gt;</code></td>
<td>Access token generated by <code>/auth/login</code> or <code>/auth/google</code>.</td>
</tr>
<tr>
<td><code>Accept</code></td>
<td>No</td>
<td><code>application/json</code></td>
<td>Responses are JSON.</td>
</tr>
</tbody>
</table>
<h4 id="body-parameters-10">Body Parameters</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>(none)</em></td>
<td>—</td>
<td>—</td>
<td>This endpoint does not accept a request body.</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Response (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.73&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;User profile retrieved successfully.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;b6df9c94-91b3-4ea7-ac37-4f5b8d2c8d1e&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jane@example.com&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;fullName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Jane Doe&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;preferredName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Jane&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;role&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;user&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;isVerified&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;passwordUpdated&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2025-01-15T11:01:11.000Z&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;oauthProviders&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">&quot;google&quot;</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;createdAt&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2025-01-10T09:15:23.000Z&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;updatedAt&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2025-01-14T16:58:41.000Z&quot;</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>User Not Found (404):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">404</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5.67&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;User not found.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;The requested user record could not be located.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Server Error (500):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">500</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;8.13&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Database Error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;An error occurred while retrieving the user profile.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="put-usersme">PUT /users/me</h3>
<ul>
<li><strong>Purpose:</strong> Update <code>fullName</code> and/or <code>preferredName</code>. To change the email or password, use the dedicated endpoints.</li>
<li><strong>Authentication:</strong> Access token required.</li>
</ul>
<h4 id="request-overview-11">Request Overview</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td><code>PUT</code></td>
</tr>
<tr>
<td>Path</td>
<td><code>/users/me</code></td>
</tr>
<tr>
<td>Authentication</td>
<td><code>Authorization: Bearer &lt;accessToken&gt;</code></td>
</tr>
<tr>
<td>Rate Limit</td>
<td>60 requests / minute / user</td>
</tr>
<tr>
<td>Content-Type</td>
<td><code>application/json</code></td>
</tr>
</tbody>
</table>
<h4 id="required-headers-11">Required Headers</h4>
<table>
<thead>
<tr>
<th>Header</th>
<th>Required</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Authorization</code></td>
<td>Yes</td>
<td><code>Bearer &lt;accessToken&gt;</code></td>
<td>Access token generated by <code>/auth/login</code> or <code>/auth/google</code>.</td>
</tr>
<tr>
<td><code>Content-Type</code></td>
<td>Yes</td>
<td><code>application/json</code></td>
<td>Body must be JSON encoded.</td>
</tr>
<tr>
<td><code>Accept</code></td>
<td>No</td>
<td><code>application/json</code></td>
<td>Responses are JSON.</td>
</tr>
</tbody>
</table>
<h4 id="body-parameters-11">Body Parameters</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>fullName</code></td>
<td>string</td>
<td>Conditionally</td>
<td>2–255 characters; letters plus spaces, hyphens, periods, apostrophes.</td>
</tr>
<tr>
<td><code>preferredName</code></td>
<td>string</td>
<td>Conditionally</td>
<td>2–100 alphabetic characters (letters only).</td>
</tr>
</tbody>
</table>
<p>At least one of <code>fullName</code> or <code>preferredName</code> must be provided.</p>
<ul>
<li><strong>Request Body:</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;fullName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Jane Q. Doe&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;preferredName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Jan&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Updated (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;6.41&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;User profile updated successfully.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;b6df9c94-91b3-4ea7-ac37-4f5b8d2c8d1e&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jane@example.com&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;fullName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Jane Q. Doe&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;preferredName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Jan&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;role&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;user&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;isVerified&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;passwordUpdated&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2025-01-15T11:01:11.000Z&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;createdAt&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2025-01-10T09:15:23.000Z&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;updatedAt&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2025-01-17T08:44:02.000Z&quot;</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>No Fields Provided (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.21&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;No changes were provided.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Please provide at least one field to update.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Validation Error (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.92&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Validation Error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Preferred Name must be between 2 and 100 characters.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>User Not Found (404):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">404</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5.33&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;User not found.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;The requested user record could not be located.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Server Error (500):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">500</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;8.26&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Database Error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;An error occurred while updating the user profile.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="delete-usersme">DELETE /users/me</h3>
<ul>
<li><strong>Purpose:</strong> Initiate a soft-delete. Sends a confirmation link to the account email; the account is disabled only after the link is confirmed.</li>
<li><strong>Daily Quota:</strong> Maximum of two disable requests per account per rolling 24 hours.</li>
</ul>
<h4 id="request-overview-12">Request Overview</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td><code>DELETE</code></td>
</tr>
<tr>
<td>Path</td>
<td><code>/users/me</code></td>
</tr>
<tr>
<td>Authentication</td>
<td><code>Authorization: Bearer &lt;accessToken&gt;</code></td>
</tr>
<tr>
<td>Rate Limit</td>
<td>60 requests / minute / user</td>
</tr>
<tr>
<td>Content-Type</td>
<td>N/A (no body)</td>
</tr>
</tbody>
</table>
<h4 id="required-headers-12">Required Headers</h4>
<table>
<thead>
<tr>
<th>Header</th>
<th>Required</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Authorization</code></td>
<td>Yes</td>
<td><code>Bearer &lt;accessToken&gt;</code></td>
<td>Required to identify the user being disabled.</td>
</tr>
<tr>
<td><code>Accept</code></td>
<td>No</td>
<td><code>application/json</code></td>
<td>Responses are JSON.</td>
</tr>
</tbody>
</table>
<h4 id="body-parameters-12">Body Parameters</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>(none)</em></td>
<td>—</td>
<td>—</td>
<td>This endpoint does not accept a request body.</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Requested (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;6.07&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Check your email to confirm this action.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;disclaimer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Your account will remain active until you confirm the disable request via the link we sent.&quot;</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>User Not Found (404):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">404</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5.48&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;User not found.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;The requested user record could not be located.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Server Error (500):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">500</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;8.44&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Internal Server Error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;An error occurred while requesting the account disable action.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="post-usersmeverify-delete">POST /users/me/verify-delete</h3>
<ul>
<li><strong>Purpose:</strong> Confirms the disable request using the emailed token, validates the user’s email, and revokes all active sessions.</li>
<li><strong>Authentication:</strong> Not required (token + email based); protected by CAPTCHA.</li>
</ul>
<h4 id="request-overview-13">Request Overview</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td><code>POST</code></td>
</tr>
<tr>
<td>Path</td>
<td><code>/users/me/verify-delete</code></td>
</tr>
<tr>
<td>Authentication</td>
<td>None</td>
</tr>
<tr>
<td>Rate Limit</td>
<td>3 requests / 5 minutes / IP</td>
</tr>
<tr>
<td>CAPTCHA Action</td>
<td><code>verify_delete</code></td>
</tr>
<tr>
<td>Content-Type</td>
<td><code>application/json</code></td>
</tr>
</tbody>
</table>
<h4 id="required-headers-13">Required Headers</h4>
<table>
<thead>
<tr>
<th>Header</th>
<th>Required</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Content-Type</code></td>
<td>Yes</td>
<td><code>application/json</code></td>
<td>Body must be JSON encoded.</td>
</tr>
<tr>
<td><code>Accept</code></td>
<td>No</td>
<td><code>application/json</code></td>
<td>Responses are JSON.</td>
</tr>
</tbody>
</table>
<h4 id="body-parameters-13">Body Parameters</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>token</code></td>
<td>string</td>
<td>Yes</td>
<td>Token supplied in the disable-confirmation email.</td>
</tr>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>Yes</td>
<td>Must match the account email that requested disable.</td>
</tr>
<tr>
<td><code>captchaToken</code></td>
<td>string</td>
<td>Yes</td>
<td>reCAPTCHA v3 token for action <code>verify_delete</code>.</td>
</tr>
</tbody>
</table>
<p><em>Security note: If the supplied email or CAPTCHA token does not match the pending request, the API returns the same error as an invalid or expired token.</em></p>
<ul>
<li><strong>Confirmed (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5.01&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Your account has been disabled.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;disclaimer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;If you need to reactivate the account, please contact support.&quot;</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Invalid Token / Email (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.44&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Invalid or expired token&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;The confirmation token is invalid, has expired, or the supplied information does not match this request.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="post-usersmerequest-email-change">POST /users/me/request-email-change</h3>
<ul>
<li><strong>Purpose:</strong> Initiate an email change for the authenticated user. Sends a verification link to the new email address. The user is signed out everywhere once the new email is confirmed.</li>
<li><strong>Daily Quota:</strong> Only one email change request can be initiated per account per day.</li>
<li><strong>Authentication:</strong> Access token required.</li>
</ul>
<h4 id="request-overview-14">Request Overview</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td><code>POST</code></td>
</tr>
<tr>
<td>Path</td>
<td><code>/users/me/request-email-change</code></td>
</tr>
<tr>
<td>Authentication</td>
<td><code>Authorization: Bearer &lt;accessToken&gt;</code></td>
</tr>
<tr>
<td>Rate Limit</td>
<td>60 requests / minute / user + 1 request / 5 minutes / IP (email cost) + 1 request / day / account</td>
</tr>
<tr>
<td>Content-Type</td>
<td><code>application/json</code></td>
</tr>
</tbody>
</table>
<h4 id="required-headers-14">Required Headers</h4>
<table>
<thead>
<tr>
<th>Header</th>
<th>Required</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Authorization</code></td>
<td>Yes</td>
<td><code>Bearer &lt;accessToken&gt;</code></td>
<td>Identifies the user requesting the change.</td>
</tr>
<tr>
<td><code>Content-Type</code></td>
<td>Yes</td>
<td><code>application/json</code></td>
<td>Body must be JSON encoded.</td>
</tr>
<tr>
<td><code>Accept</code></td>
<td>No</td>
<td><code>application/json</code></td>
<td>Responses are JSON.</td>
</tr>
</tbody>
</table>
<h4 id="body-parameters-14">Body Parameters</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>newEmail</code></td>
<td>string</td>
<td>Yes</td>
<td>Desired email address; must pass the same validation as registration.</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Generic Success (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.32&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;If this email can be used, you will receive a confirmation link shortly.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;disclaimer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;You will be signed out on all devices once the new email is verified.&quot;</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Validation Error (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.12&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Validation Error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;The new email address must be different from your current email.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="post-usersmeverify-email-change">POST /users/me/verify-email-change</h3>
<ul>
<li><strong>Purpose:</strong> Confirms the pending email change using the token sent to the new email address. Requires the user’s current email, the new email, password confirmation, and a CAPTCHA check before revoking sessions and removing OAuth links.</li>
<li><strong>Authentication:</strong> Not required (token + credentials); protected by CAPTCHA.</li>
</ul>
<h4 id="request-overview-15">Request Overview</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td><code>POST</code></td>
</tr>
<tr>
<td>Path</td>
<td><code>/users/me/verify-email-change</code></td>
</tr>
<tr>
<td>Authentication</td>
<td>None</td>
</tr>
<tr>
<td>Rate Limit</td>
<td>3 requests / 5 minutes / IP</td>
</tr>
<tr>
<td>CAPTCHA Action</td>
<td><code>verify_email_change</code></td>
</tr>
<tr>
<td>Content-Type</td>
<td><code>application/json</code></td>
</tr>
</tbody>
</table>
<h4 id="body-parameters-15">Body Parameters</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>token</code></td>
<td>string</td>
<td>Yes</td>
<td>Token from the verification email.</td>
</tr>
<tr>
<td><code>oldEmail</code></td>
<td>string</td>
<td>Yes</td>
<td>Must match the current account email.</td>
</tr>
<tr>
<td><code>newEmail</code></td>
<td>string</td>
<td>Yes</td>
<td>Must match the email that initiated the change.</td>
</tr>
<tr>
<td><code>password</code></td>
<td>string</td>
<td>Yes</td>
<td>Confirms the user controls the account.</td>
</tr>
<tr>
<td><code>captchaToken</code></td>
<td>string</td>
<td>Yes</td>
<td>reCAPTCHA v3 token for action <code>verify_email_change</code>.</td>
</tr>
</tbody>
</table>
<p><em>Security note: Incorrect email, password, or CAPTCHA data yields the same error as an invalid token to prevent email enumeration.</em></p>
<ul>
<li><strong>Confirmed (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.85&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Your email address has been updated.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;disclaimer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Please log in with your new email address. You have been signed out on all devices.&quot;</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Invalid Token / Data (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.02&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Invalid or expired token&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;The confirmation token is invalid, has expired, or the supplied information does not match this request.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="delete-usersmerequest-account-deletion-also-available-as-post">DELETE /users/me/request-account-deletion (also available as POST)</h3>
<ul>
<li><strong>Purpose:</strong> Starts the permanent deletion workflow. Sends a confirmation link to the account email. After confirmation, support (<a href="mailto:support@fjnel.co.za">support@fjnel.co.za</a>) is notified with the account details needed to complete the deletion.</li>
<li><strong>Daily Quota:</strong> Up to two deletion requests per account per day (shared between <code>DELETE</code> and <code>POST</code> clients).</li>
<li><strong>Authentication:</strong> Access token required.</li>
</ul>
<h4 id="request-overview-16">Request Overview</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td><code>DELETE</code> (legacy clients may still use <code>POST</code>)</td>
</tr>
<tr>
<td>Path</td>
<td><code>/users/me/request-account-deletion</code></td>
</tr>
<tr>
<td>Authentication</td>
<td><code>Authorization: Bearer &lt;accessToken&gt;</code></td>
</tr>
<tr>
<td>Rate Limit</td>
<td>60 requests / minute / user + 1 request / 5 minutes / IP (email cost) + 2 requests / day / account</td>
</tr>
<tr>
<td>Content-Type</td>
<td>N/A (no body)</td>
</tr>
</tbody>
</table>
<h4 id="required-headers-15">Required Headers</h4>
<table>
<thead>
<tr>
<th>Header</th>
<th>Required</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Authorization</code></td>
<td>Yes</td>
<td><code>Bearer &lt;accessToken&gt;</code></td>
<td>Identifies the user requesting deletion.</td>
</tr>
<tr>
<td><code>Accept</code></td>
<td>No</td>
<td><code>application/json</code></td>
<td>Responses are JSON.</td>
</tr>
</tbody>
</table>
<h4 id="body-parameters-16">Body Parameters</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>(none)</em></td>
<td>—</td>
<td>—</td>
<td>No request body is accepted.</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Requested (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.77&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Check your email to confirm this deletion request.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;disclaimer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Our support team will only be notified after you confirm via the email link.&quot;</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Server Error (500):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">500</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;7.65&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Internal Server Error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;An error occurred while requesting account deletion.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="post-usersmeverify-account-deletion">POST /users/me/verify-account-deletion</h3>
<ul>
<li><strong>Purpose:</strong> Confirms the deletion request using the emailed token, validates the user’s credentials, and notifies support so the deletion can be processed manually.</li>
<li><strong>Authentication:</strong> Not required (token + credentials); protected by CAPTCHA.</li>
</ul>
<h4 id="request-overview-17">Request Overview</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td><code>POST</code></td>
</tr>
<tr>
<td>Path</td>
<td><code>/users/me/verify-account-deletion</code></td>
</tr>
<tr>
<td>Authentication</td>
<td>None</td>
</tr>
<tr>
<td>Rate Limit</td>
<td>3 requests / 5 minutes / IP</td>
</tr>
<tr>
<td>CAPTCHA Action</td>
<td><code>verify_account_deletion</code></td>
</tr>
<tr>
<td>Content-Type</td>
<td><code>application/json</code></td>
</tr>
</tbody>
</table>
<h4 id="body-parameters-17">Body Parameters</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>token</code></td>
<td>string</td>
<td>Yes</td>
<td>Token supplied in the deletion-confirmation email.</td>
</tr>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>Yes</td>
<td>Must match the account requesting deletion.</td>
</tr>
<tr>
<td><code>password</code></td>
<td>string</td>
<td>Yes</td>
<td>Must match the current account password.</td>
</tr>
<tr>
<td><code>confirm</code></td>
<td>boolean</td>
<td>Yes</td>
<td>Must be <code>true</code> to acknowledge the permanent deletion.</td>
</tr>
<tr>
<td><code>captchaToken</code></td>
<td>string</td>
<td>Yes</td>
<td>reCAPTCHA v3 token for action <code>verify_account_deletion</code>.</td>
</tr>
</tbody>
</table>
<p><em>Security note: Invalid email, password, or confirmation values produce the same response as an expired token.</em></p>
<ul>
<li><strong>Confirmed (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.23&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Your request has been forwarded to our support team.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;disclaimer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Support will reach out on the confirmed email address to finalize the deletion.&quot;</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Invalid Token / Credentials (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.01&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Invalid or expired token&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;The confirmation token is invalid, has expired, or the supplied information does not match this request.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="get-usersmesessions">GET /users/me/sessions</h3>
<ul>
<li><strong>Purpose:</strong> List the authenticated user’s active refresh-token sessions, including device, browser, IP hint, and remaining lifetime.</li>
<li><strong>Authentication:</strong> Access token required.</li>
</ul>
<h4 id="request-overview-18">Request Overview</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td><code>GET</code></td>
</tr>
<tr>
<td>Path</td>
<td><code>/users/me/sessions</code></td>
</tr>
<tr>
<td>Authentication</td>
<td><code>Authorization: Bearer &lt;accessToken&gt;</code></td>
</tr>
<tr>
<td>Rate Limit</td>
<td>60 requests / minute / user</td>
</tr>
<tr>
<td>Content-Type</td>
<td>N/A (no body)</td>
</tr>
</tbody>
</table>
<h4 id="required-headers-16">Required Headers</h4>
<table>
<thead>
<tr>
<th>Header</th>
<th>Required</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Authorization</code></td>
<td>Yes</td>
<td><code>Bearer &lt;accessToken&gt;</code></td>
<td>Identifies the user whose sessions are being listed.</td>
</tr>
<tr>
<td><code>Accept</code></td>
<td>No</td>
<td><code>application/json</code></td>
<td>Responses are JSON.</td>
</tr>
</tbody>
</table>
<h4 id="body-parameters-18">Body Parameters</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>(none)</em></td>
<td>—</td>
<td>—</td>
<td>This endpoint does not accept a request body.</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Response (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5.31&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Active sessions retrieved.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;sessions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;fingerprint&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;f17bb6df-d94b-4d85-88de-3c8280dcfd9e&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;issuedAt&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2025-01-17T08:30:00.000Z&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;expiresAt&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2025-01-24T08:30:00.000Z&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;expiresInSeconds&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">543210</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;ipAddress&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;203.0.113.24&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;locationHint&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;IP 203.0.113.24&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;browser&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Chrome&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;device&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Desktop&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;operatingSystem&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Windows&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;rawUserAgent&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 ...&quot;</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;fingerprint&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;6b9d3caa-1d7e-4f91-9d39-6a74073ca21c&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;issuedAt&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2025-01-16T19:04:11.000Z&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;expiresAt&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2025-01-23T19:04:11.000Z&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;expiresInSeconds&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">302515</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;ipAddress&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">null</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;locationHint&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Unknown&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;browser&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Safari&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;device&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Mobile&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;operatingSystem&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;iOS&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;rawUserAgent&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Mozilla/5.0 (iPhone; CPU iPhone OS 17_2 like Mac OS X) AppleWebKit/605.1.15 ...&quot;</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Server Error (500):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">500</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;7.44&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Internal Server Error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Unable to retrieve sessions at this time.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="delete-usersmesessionsfingerprint">DELETE /users/me/sessions/:fingerprint</h3>
<ul>
<li><strong>Purpose:</strong> Revoke a single refresh-token session (for example, to sign out a lost or unattended device). Fingerprints are returned by <code>GET /users/me/sessions</code>.</li>
<li><strong>Authentication:</strong> Access token required.</li>
</ul>
<h4 id="request-overview-19">Request Overview</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td><code>DELETE</code></td>
</tr>
<tr>
<td>Path</td>
<td><code>/users/me/sessions/:fingerprint</code></td>
</tr>
<tr>
<td>Authentication</td>
<td><code>Authorization: Bearer &lt;accessToken&gt;</code></td>
</tr>
<tr>
<td>Rate Limit</td>
<td>60 requests / minute / user</td>
</tr>
<tr>
<td>Content-Type</td>
<td>N/A (no body)</td>
</tr>
</tbody>
</table>
<h4 id="required-headers-17">Required Headers</h4>
<table>
<thead>
<tr>
<th>Header</th>
<th>Required</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Authorization</code></td>
<td>Yes</td>
<td><code>Bearer &lt;accessToken&gt;</code></td>
<td>Identifies the requesting user.</td>
</tr>
<tr>
<td><code>Accept</code></td>
<td>No</td>
<td><code>application/json</code></td>
<td>Responses are JSON.</td>
</tr>
</tbody>
</table>
<h4 id="path-parameters">Path Parameters</h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>fingerprint</code></td>
<td>string</td>
<td>Yes</td>
<td>Token fingerprint returned by the session listing endpoint.</td>
</tr>
</tbody>
</table>
<h4 id="body-parameters-19">Body Parameters</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>(none)</em></td>
<td>—</td>
<td>—</td>
<td>Provide the fingerprint via the path parameter.</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Session Revoked (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.78&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Session revoked.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;fingerprint&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;f17bb6df-d94b-4d85-88de-3c8280dcfd9e&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;wasRevoked&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Session Already Inactive (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.02&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Session not found or already inactive.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;fingerprint&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;6b9d3caa-1d7e-4f91-9d39-6a74073ca21c&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;wasRevoked&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Invalid Fingerprint (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;3.61&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Invalid session identifier&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;A session fingerprint must be provided in the URL path.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Server Error (500):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">500</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;6.01&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Internal Server Error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;Unable to revoke the requested session.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="post-usersmechange-password">POST /users/me/change-password</h3>
<ul>
<li><strong>Purpose:</strong> Allows an authenticated user to update their password without email verification. Requires the current password, a compliant new password, and a CAPTCHA check. All active sessions are revoked and the user receives a confirmation email.</li>
<li><strong>Daily Quota:</strong> A user can change their password via this endpoint up to twice per day.</li>
<li><strong>Authentication:</strong> Access token required.</li>
</ul>
<h4 id="request-overview-20">Request Overview</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td><code>POST</code></td>
</tr>
<tr>
<td>Path</td>
<td><code>/users/me/change-password</code></td>
</tr>
<tr>
<td>Authentication</td>
<td><code>Authorization: Bearer &lt;accessToken&gt;</code></td>
</tr>
<tr>
<td>Rate Limit</td>
<td>3 requests / 5 minutes / user + 1 request / 5 minutes / IP (email cost) + 2 requests / day / account</td>
</tr>
<tr>
<td>CAPTCHA Action</td>
<td><code>change_password</code></td>
</tr>
<tr>
<td>Content-Type</td>
<td><code>application/json</code></td>
</tr>
</tbody>
</table>
<h4 id="required-headers-18">Required Headers</h4>
<table>
<thead>
<tr>
<th>Header</th>
<th>Required</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Authorization</code></td>
<td>Yes</td>
<td><code>Bearer &lt;accessToken&gt;</code></td>
<td>Identifies the signed-in user.</td>
</tr>
<tr>
<td><code>Content-Type</code></td>
<td>Yes</td>
<td><code>application/json</code></td>
<td>Body must be JSON encoded.</td>
</tr>
</tbody>
</table>
<h4 id="body-parameters-20">Body Parameters</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>currentPassword</code></td>
<td>string</td>
<td>Yes</td>
<td>Must match the user’s existing password.</td>
</tr>
<tr>
<td><code>newPassword</code></td>
<td>string</td>
<td>Yes</td>
<td>10–100 characters with upper, lower, digit, special character.</td>
</tr>
<tr>
<td><code>captchaToken</code></td>
<td>string</td>
<td>Yes</td>
<td>reCAPTCHA v3 token for action <code>change_password</code>.</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Successful Change (200):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;success&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;6.02&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Password updated successfully.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;passwordUpdated&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2025-01-17T09:02:44.000Z&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;disclaimer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;You have been signed out on all devices. Please log in using your new password.&quot;</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Invalid Current Password (400):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.67&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Validation Error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;The current password provided is incorrect.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr>
<h2 id="admin">Admin</h2>
<p>All <code>/admin/*</code> routes require an authenticated admin user and currently share the same placeholder implementation.</p>
<h4 id="shared-request-overview">Shared Request Overview</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method</td>
<td>Varies (<code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>DELETE</code>)</td>
</tr>
<tr>
<td>Path</td>
<td><code>/admin/*</code></td>
</tr>
<tr>
<td>Authentication</td>
<td><code>Authorization: Bearer &lt;accessToken&gt;</code> with <code>role=admin</code></td>
</tr>
<tr>
<td>Rate Limit</td>
<td>60 requests / minute / admin user</td>
</tr>
<tr>
<td>Content-Type</td>
<td><code>application/json</code> for endpoints that accept a body</td>
</tr>
</tbody>
</table>
<h4 id="required-headers-19">Required Headers</h4>
<table>
<thead>
<tr>
<th>Header</th>
<th>Required</th>
<th>Value</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Authorization</code></td>
<td>Yes</td>
<td><code>Bearer &lt;accessToken&gt;</code></td>
<td>Token must belong to a user with the <code>admin</code> role.</td>
</tr>
<tr>
<td><code>Content-Type</code></td>
<td>Conditional</td>
<td><code>application/json</code></td>
<td>Required when sending a JSON body.</td>
</tr>
<tr>
<td><code>Accept</code></td>
<td>No</td>
<td><code>application/json</code></td>
<td>Responses are JSON.</td>
</tr>
</tbody>
</table>
<h4 id="body-parameters-21">Body Parameters</h4>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>(varies)</em></td>
<td>—</td>
<td>—</td>
<td>Admin endpoints are not yet implemented; request bodies will be documented once available.</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Not Implemented (300):</strong></li>
</ul>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;error&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;httpCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">300</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;responseTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;4.02&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;This admin endpoint is not yet implemented.&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;errors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">&quot;This admin endpoint is not yet implemented.&quot;</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Unauthorized (401):</strong> When no valid access token is provided the standard authentication error response is returned.</li>
<li><strong>Forbidden (403):</strong> Authenticated users without the <code>admin</code> role receive the shared <code>&quot;Forbidden: Insufficient permissions.&quot;</code> envelope.</li>
</ul>
<p>Further details will be documented once the admin endpoints are implemented.</p>

            
            
        </body>
        </html>